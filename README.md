# 简介

1Panel 之间的 SSL 证书同步更新工具，也可以用于手动上传证书到 1Panel，同样适用于定时任务。

# 使用方法

## 脚本模式

| 模式类型             | 使用条件                                                                                                                 | 使用场景                                                                     | 命令示例                                                        |
| -------------------- | ------------------------------------------------------------------------------------------------------------------------ | ---------------------------------------------------------------------------- | --------------------------------------------------------------- |
| **自动模式（推荐）** | **使用默认证书路径**，证书文件修改时间在  **5 秒内**                                                                     | 配合 1Panel 的 **"推送证书到本地目录"**  和 **"申请证书之后执行脚本"**  使用 | `ssl_upload.sh -s 123`                                          |
| **半自动模式**       | **使用证书路径传参的方式激活**，默认允许证书文件修改时间在 **64800 秒（24 小时）** 内（该时间窗口可通过 `-m 秒数` 覆盖） | 定时任务或其它各种场景                                                       | `ssl_upload.sh -s 123 -c /path/to/cert.pem -p /path/to/key.pem` |
| **强制模式**         | **通过 `-f` 参数激活**，忽略所有时间检                                                                                   | 紧急修复证书或手动上传                                                       | `ssl_upload.sh -s 123 -f`                                       |

## 参数说明

| 参数选项 | 是否必需 | 默认值            | 描述                                                   |
| -------- | -------- | ----------------- | ------------------------------------------------------ |
| `-s`     | 是       | 无                | 目标 SSL 证书 ID（在 1Panel 面板中证书对应的唯一标识） |
| `-c`     | 否       | `./fullchain.pem` | 自定义证书文件路径（覆盖自动模式默认路径）             |
| `-p`     | 否       | `./privkey.pem`   | 自定义私钥文件路径（覆盖自动模式默认路径）             |
| `-f`     | 否       | 关闭              | 强制模式：忽略证书文件修改时间检测                     |
| `-m`     | 否       | `86400` (24 小时) | 覆盖半自动模式的时间窗口阈值（单位：秒）               |
| `-r`     | 否       | `8`               | 设置最大重试次数（网络异常时自动重试）                 |
| `-i`     | 否       | `15`              | 设置重试间隔时间（单位：秒）                           |

# 详细教程

- [适用于 1Panel 之间的 SSL 证书同步更新脚本](https://www.l0u0l.com/posts/1panel-ssl-uploader/)
